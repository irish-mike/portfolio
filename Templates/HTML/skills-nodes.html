<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        #central-node {
            margin-bottom: 70px;
            background-color: #d3d3d3;
        }

        #myCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            /* Ensure canvas is behind the nodes */
        }

        .node,
        .group-node {
            position: relative;
            z-index: 2;
            /* Ensure nodes are in front of the canvas */
        }

        .node {
            border: 2px solid #343a40;
            border-radius: 8px;
        }

        .group-node {
            border: 2px solid #d3d3d3;
            border-radius: 8px;
            padding: 10px;
            background-color: #f0f0f0;
        }

        .skill {
            margin: 5px 0;
            padding: 5px;
            background-color: #e0e0e0;
            border-radius: 5px;
        }
    </style>
</head>

<body>

    <div class="container text-center mt-5">
        <div class="skills-chart">
            <canvas id="myCanvas" style="position:absolute; top:0; left:0; width:100%; height:100%;"></canvas>

            <div class="row">
                <div class="col-md-12">
                    <div class="node mx-auto w-25" id="central-node">Skills</div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3 offset-md-1 ml-4 p-4">
                    <div class="node group-node ml-4 pl-4" id="programming-group">
                        <div class="skill">Programming</div>
                        <div class="skill">Skill 1</div>
                        <div class="skill">Skill 2</div>
                        <div class="skill">Skill 3</div>
                    </div>
                </div>
                <div class="col-md-2 offset-md-4">
                    <div class="node group-node" id="languages-group">
                        <div class="skill">Languages</div>
                        <div class="skill">Skill 1</div>
                        <div class="skill">Skill 2</div>
                        <div class="skill">Skill 3</div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2 offset-md-4">
                    <div class="node group-node" id="softskills-group">
                        <div class="skill">Soft Skills</div>
                        <div class="skill">Skill 1</div>
                        <div class="skill">Skill 2</div>
                    </div>
                </div>
                <div class="col-md-3 offset-md-2 m-4 p-4">
                    <div class="node group-node " id="frameworks-group">
                        <div class="skill">Frameworks</div>
                        <div class="skill">Skill 1</div>
                        <div class="skill">Skill 2</div>
                        <div class="skill">Skill 3</div>
                        <div class="skill">Skill 3</div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        window.onload = function () {
            const canvas = document.getElementById('myCanvas');
            const ctx = canvas.getContext('2d');
            ctx.canvas.width = window.innerWidth;
            ctx.canvas.height = window.innerHeight;

            const centralNode = document.getElementById('central-node');
            const programmingGroup = document.getElementById('programming-group');
            const languagesGroup = document.getElementById('languages-group');
            const frameworksGroup = document.getElementById('frameworks-group');
            const softSkillsGroup = document.getElementById('softskills-group');

            const groups = [programmingGroup, languagesGroup, frameworksGroup, softSkillsGroup];

            const connectNodes = (startNode, endNode, startDirection) => {
                const startRect = startNode.getBoundingClientRect();

                const endRect = endNode.getBoundingClientRect();

                const startX = startRect.left + startRect.width / 2;
                const startY = startRect.top + (startRect.height / 2)

                const endX = endRect.left + endRect.width / 2;
                const endY = endRect.top;

                drawSoftenedSegmentedLine(ctx, { x: startX, y: startY }, { x: endX, y: endY }, startDirection);
            };

            groups.forEach(group => {
                if (group === programmingGroup) {
                    connectNodes(centralNode, group, 'x');
                } else if (group === languagesGroup) {
                    connectNodes(centralNode, group, 'x');
                } else {
                    connectNodes(centralNode, group, 'y');
                }
            });
        };

        function drawSoftenedSegmentedLine(ctx, pointA, pointB, startDirection) {
            const midX = (pointA.x + pointB.x) / 2;
            const midY = (pointA.y + pointB.y) / 2;
            const radius = 50;

            ctx.beginPath();
            ctx.moveTo(pointA.x, pointA.y);

            const drawSegment = (lineToX, lineToY, ctrlToX, ctrlToY, endX, endY) => {
                ctx.lineTo(lineToX, lineToY);
                ctx.quadraticCurveTo(ctrlToX, ctrlToY, endX, endY);
            };

            if (startDirection === 'x') {
                const direction = pointB.x > pointA.x ? 1 : -1;
                const radiusY = pointB.y > pointA.y ? radius : -radius;

                drawSegment(pointB.x - radius * direction, pointA.y, pointB.x, pointA.y, pointB.x, pointA.y + radiusY);
            } else {
                const direction = pointB.y < pointA.y ? 1 : -1;
                const radiusX = pointB.x > pointA.x ? radius : -radius;

                drawSegment(pointA.x, midY + radius * direction, pointA.x, midY, pointA.x + radiusX, midY);
                drawSegment(pointB.x - radiusX, midY, pointB.x, midY, pointB.x, midY - radius * direction);
            }

            ctx.lineTo(pointB.x, pointB.y);
            ctx.stroke();
        }
    </script>
</body>

</html>